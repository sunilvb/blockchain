function gonogo
{
  read -p "Do you like what you see? Press Y/y to continue:" -n 1 -r
  echo    # (optional) move to a new line
  if [[ ! $REPLY =~ ^[Yy]$ ]]
  then
      echo "Exiting since you Pressed No or N"
      exit 1
  fi
}

cd fabric-samples/commercial-paper
./network-clean.sh

./network-starter.sh

cd organization/magnetocorp

source magnetocorp.sh

peer lifecycle chaincode package cp.tar.gz --lang node --path ./contract --label cp_0

ls -l

peer lifecycle chaincode install cp.tar.gz

peer lifecycle chaincode queryinstalled > sample.txt

peer lifecycle chaincode queryinstalled

sed -ne '/Package /s/.*ID: \([^"]*\),.*/\1/p' sample.txt > ss.txt
while read LINE; do export PACKAGE_ID="$LINE"; done < ss.txt

echo PACKAGE_ID=$PACKAGE_ID

gonogo

peer lifecycle chaincode approveformyorg --orderer localhost:7050 --ordererTLSHostnameOverride orderer.example.com --channelID mychannel --name papercontract -v 0 --package-id $PACKAGE_ID --sequence 1 --tls --cafile $ORDERER_CA
===============
rm ../digibank/cp.tar.gz
ls -l ../digibank/
cp cp.tar.gz ../digibank/
ls -l ../digibank/
===============

cd ../digibank/

source digibank.sh

peer lifecycle chaincode package cp.tar.gz --lang node --path ./contract --label cp_0

peer lifecycle chaincode install cp.tar.gz

peer lifecycle chaincode queryinstalled

export PACKAGE_ID=

peer lifecycle chaincode approveformyorg --orderer localhost:7050 --ordererTLSHostnameOverride orderer.example.com --channelID mychannel --name papercontract -v 0 --package-id $PACKAGE_ID --sequence 1 --tls --cafile $ORDERER_CA

=============
peer lifecycle chaincode commit -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --peerAddresses localhost:7051 --tlsRootCertFiles ${PEER0_ORG1_CA} --peerAddresses localhost:9051 --tlsRootCertFiles ${PEER0_ORG2_CA} --channelID mychannel --name papercontract -v 0 --sequence 1 --tls --cafile $ORDERER_CA --waitForEvent
